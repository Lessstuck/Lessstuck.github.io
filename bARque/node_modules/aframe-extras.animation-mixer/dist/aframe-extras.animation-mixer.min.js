!function t(i,e,n){function o(r,s){if(!e[r]){if(!i[r]){var c="function"==typeof require&&require;if(!s&&c)return c(r,!0);if(a)return a(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var u=e[r]={exports:{}};i[r][0].call(u.exports,function(t){var e=i[r][1][t];return o(e||t)},u,u.exports,t,i,e,n)}return e[r].exports}for(var a="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,i,e){AFRAME.registerComponent("animation-mixer",t("./tmp/aframe-extras.animation-mixer/index.js"))},{"./tmp/aframe-extras.animation-mixer/index.js":2}],2:[function(t,i,e){function n(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}const o={once:THREE.LoopOnce,repeat:THREE.LoopRepeat,pingpong:THREE.LoopPingPong};i.exports=AFRAME.registerComponent("animation-mixer",{schema:{clip:{default:"*"},duration:{default:0},crossFadeDuration:{default:0},loop:{default:"repeat",oneOf:Object.keys(o)},repetitions:{default:1/0,min:0}},init:function(){this.model=null,this.mixer=null,this.activeActions=[];const t=this.el.getObject3D("mesh");t?this.load(t):this.el.addEventListener("model-loaded",t=>{this.load(t.detail.model)})},load:function(t){const i=this.el;this.model=t,this.mixer=new THREE.AnimationMixer(t),this.mixer.addEventListener("loop",t=>{i.emit("animation-loop",{action:t.action,loopDelta:t.loopDelta})}),this.mixer.addEventListener("finished",t=>{i.emit("animation-finished",{action:t.action,direction:t.direction})}),this.data.clip&&this.update({})},remove:function(){this.mixer&&this.mixer.stopAllAction()},update:function(t){t&&(this.stopAction(),this.data.clip&&this.playAction())},stopAction:function(){const t=this.data;for(let i=0;i<this.activeActions.length;i++)t.crossFadeDuration?this.activeActions[i].fadeOut(t.crossFadeDuration):this.activeActions[i].stop();this.activeActions.length=0},playAction:function(){if(!this.mixer)return;const t=this.model,i=this.data,e=t.animations||(t.geometry||{}).animations||[];if(!e.length)return;const a=function(t){return new RegExp("^"+t.split(/\*+/).map(n).join(".*")+"$")}(i.clip);for(let n,r=0;n=e[r];r++)if(n.name.match(a)){const e=this.mixer.clipAction(n,t);e.enabled=!0,i.duration&&e.setDuration(i.duration),e.setLoop(o[i.loop],i.repetitions).fadeIn(i.crossFadeDuration).play(),this.activeActions.push(e)}},tick:function(t,i){this.mixer&&!isNaN(i)&&this.mixer.update(i/1e3)}})},{}]},{},[1]);